<view class="text-area-container">
  <!-- æ˜¾ç¤ºé¢„è§ˆå†…å®¹æˆ–æ–‡æœ¬åŒºåŸŸ -->
  <block wx:if="{{!showPreview && !readOnly}}">
    <textarea
      class="text-area {{markdownMode ? 'markdown-editor' : ''}}"
      style="height: {{_height}}rpx;"
      placeholder="{{markdownMode ? 'ä½¿ç”¨ # ä½œä¸ºæ ‡é¢˜ ## ä½œä¸ºäºŒçº§æ ‡é¢˜ æ­£æ–‡å†…å®¹...' : placeholder}}"
      value="{{value}}"
      maxlength="{{maxlength}}"
      auto-height="{{autoHeight}}"
      disabled="{{disabled}}"
      focus="{{focus}}"
      show-confirm-bar="{{false}}"
      adjust-position="{{adjustPosition}}"
      bindinput="onInput"
      bindfocus="onFocus"
      bindblur="onBlur"
      bindconfirm="onConfirm"
      space="{{space}}"
    ></textarea>
  </block>
  <block wx:else>
    <!-- Markdowné¢„è§ˆåŒºåŸŸ -->
    <scroll-view scroll-y class="markdown-preview {{readOnly ? 'read-only' : ''}}" style="height: {{_height}}rpx;">
      <view wx:if="{{markdownNodes}}">
        <towxml nodes="{{markdownNodes}}"/>
      </view>
      <view wx:else class="empty-preview">
        <text>æš‚æ— å†…å®¹é¢„è§ˆ</text>
      </view>
    </scroll-view>
  </block>

  <!-- è®¡æ•°å™¨ -->
  <view class="counter" wx:if="{{showCount && !showPreview && !readOnly}}">
    <text>{{currentLength}}/{{maxlength}}</text>
  </view>

  <!-- å·¥å…·æ  -->
  <view class="toolbar" wx:if="{{showToolbar && !readOnly}}">
    <!-- å®Œæ•´å·¥å…·æ  -->
    <block wx:if="{{!simpleToolbar}}">
      <view class="tool-item" bindtap="onBoldTap">
        <text class="tool-icon">B</text>
      </view>
      <view class="tool-item" bindtap="onItalicTap">
        <text class="tool-icon">I</text>
      </view>
      <view class="tool-item" bindtap="onImageTap">
        <text class="tool-icon">ğŸ“·</text>
      </view>
      <view class="tool-item" bindtap="onAtTap">
        <text class="tool-icon">@</text>
      </view>
    </block>
    
    <!-- é¢„è§ˆæŒ‰é’®å§‹ç»ˆæ˜¾ç¤º -->
    <view class="tool-item {{showPreview ? 'active' : ''}} {{simpleToolbar ? 'preview-only' : ''}}" bindtap="togglePreview">
      <text class="tool-icon">ğŸ‘ï¸</text>
    </view>
  </view>
</view> 