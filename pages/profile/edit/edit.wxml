<!--pages/profile/edit/edit.wxml-->
<view class="edit-container">
  <view class="header">
    <text class="title">编辑资料</text>
  </view>
  
  <view class="form-container">
    <!-- 头像选择区域 -->
    <view class="avatar-section">
      <text class="section-label">头像</text>
      <view class="avatar-picker">
        <!-- 当前头像显示 -->
        <image class="current-avatar" 
          src="{{userInfo.avatar_url || userInfo.avatarUrl || '/assets/icons/default-avatar.png'}}" 
          mode="aspectFill" binderror="onAvatarError"></image>
        
        <!-- 不同登录方式的头像选择功能 -->
        <block wx:if="{{userInfo.loginType === 'wechat'}}">
          <button class="avatar-button" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
            <text>更换头像</text>
          </button>
        </block>
        <block wx:else>
          <button class="avatar-button" bindtap="onChooseImage">
            <text>更换头像</text>
          </button>
        </block>
      </view>
    </view>
    
    <!-- 昵称输入区域 -->
    <view class="input-section">
      <text class="section-label">昵称</text>
      <input class="input-field" value="{{newNickName}}" bindinput="onInputNickName" placeholder="请输入昵称" maxlength="20"/>
    </view>
    
    <!-- 个性签名输入区域 -->
    <view class="input-section">
      <text class="section-label">个性签名</text>
      <textarea class="input-textarea" value="{{newStatus}}" bindinput="onInputStatus" placeholder="介绍一下自己吧" maxlength="50"/>
    </view>
  </view>
  
  <!-- 底部按钮区域 -->
  <view class="button-container">
    <button class="save-btn" bindtap="saveChanges">保存</button>
  </view>
</view>