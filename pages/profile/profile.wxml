<!-- 个人中心页面 -->
<view class="profile-container">
  <!-- 顶部导航栏 -->
  <view class="header">
    <text class="title">我的</text>
    <image class="setting-icon" src="/assets/icons/settings.png" bindtap="goToSettings"></image>
  </view>

  <!-- 用户信息区域 -->
  <view class="user-info-section">
    <!-- 未登录状态 -->
    <block wx:if="{{!isLoggedIn}}">
      <view class="login-prompt">
        <image class="default-avatar" src="/assets/icons/default-avatar.png" mode="aspectFill"></image>
        <view class="login-text">登录后体验更多功能</view>
        <button class="login-btn" bindtap="goToLogin">立即登录</button>
      </view>
    </block>
    
    <!-- 已登录状态 -->
    <block wx:else>
      <view class="user-info">
        <image class="avatar" 
               src="{{userInfo.avatar_url || userInfo.avatarUrl || '/assets/icons/default-avatar.png'}}" 
               mode="aspectFill"></image>
        <view class="user-details">
          <view class="username">{{userInfo.nickname || userInfo.nickName || '校园用户'}}</view>
          <view class="school">{{userInfo.school || '南开大学'}}</view>
          <view class="bio">{{userInfo.bio || userInfo.status || '这个人很懒，什么都没留下'}}</view>
        </view>
        <button class="edit-profile-btn" bindtap="editProfile">编辑资料</button>
      </view>

      <!-- 数据统计区域 -->
      <view class="stats-row">
        <view class="stat-item" bindtap="viewPosts">
          <view class="stat-count">{{postCount || 0}}</view>
          <view class="stat-label">发布</view>
        </view>
        <view class="stat-item" bindtap="viewLiked">
          <view class="stat-count">{{likeCount || 0}}</view>
          <view class="stat-label">获赞</view>
        </view>
        <view class="stat-item" bindtap="viewFollowed">
          <view class="stat-count">{{followedCount || 0}}</view>
          <view class="stat-label">关注</view>
        </view>
        <view class="stat-item" bindtap="viewFollowers">
          <view class="stat-count">{{followerCount || 0}}</view>
          <view class="stat-label">粉丝</view>
        </view>
        <view class="stat-item">
          <view class="stat-count">{{tokenCount || 0}}</view>
          <view class="stat-label">token</view>
        </view>
      </view>
    </block>
  </view>

  <!-- 功能图标区域 -->
  <view class="feature-icons">
    <view class="icon-item" bindtap="viewCollections">
      <view class="icon-circle">
        <image class="feature-icon" src="/assets/icons/star.png"></image>
      </view>
      <text class="icon-text">我的收藏</text>
    </view>
    <view class="icon-item" bindtap="viewHistory">
      <view class="icon-circle">
        <image class="feature-icon" src="/assets/icons/history.png"></image>
      </view>
      <text class="icon-text">浏览历史</text>
    </view>
    <view class="icon-item" bindtap="viewComments">
      <view class="icon-circle">
        <image class="feature-icon" src="/assets/icons/comment.png"></image>
      </view>
      <text class="icon-text">我的评论</text>
    </view>
    <view class="icon-item" bindtap="viewLiked">
      <view class="icon-circle">
        <image class="feature-icon" src="/assets/icons/like.png"></image>
      </view>
      <text class="icon-text">我的点赞</text>
    </view>
    <view class="icon-item" bindtap="viewDrafts">
      <view class="icon-circle">
        <image class="feature-icon" src="/assets/icons/draft.png"></image>
      </view>
      <text class="icon-text">草稿箱</text>
    </view>
    <view class="icon-item" bindtap="goToFeedback">
      <view class="icon-circle">
        <image class="feature-icon" src="/assets/icons/feedback.png"></image>
      </view>
      <text class="icon-text">意见反馈</text>
    </view>
  </view>

  <!-- 设置菜单区域 -->
  <view class="settings-menu">
    <view class="menu-item" bindtap="goToNotifications">
      <image class="menu-icon" src="/assets/icons/notification.png"></image>
      <text class="menu-text">消息通知</text>
      <image class="arrow-icon" src="/assets/icons/arrow-right.png"></image>
    </view>
    <view class="menu-item" bindtap="clearCache">
      <image class="menu-icon" src="/assets/icons/clear.png"></image>
      <text class="menu-text">清除缓存</text>
      <image class="arrow-icon" src="/assets/icons/arrow-right.png"></image>
    </view>
    <view class="menu-item" bindtap="goToAboutUs">
      <image class="menu-icon" src="/assets/icons/about.png"></image>
      <text class="menu-text">关于我们</text>
      <image class="arrow-icon" src="/assets/icons/arrow-right.png"></image>
    </view>
    <view class="menu-item" bindtap="logout" wx:if="{{isLoggedIn}}">
      <image class="menu-icon" src="/assets/icons/logout.png"></image>
      <text class="menu-text">退出登录</text>
      <image class="arrow-icon" src="/assets/icons/arrow-right.png"></image>
    </view>
  </view>
</view>