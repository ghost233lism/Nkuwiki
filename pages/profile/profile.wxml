<!-- 页面结构 -->
<view class="profile-container">
  <!-- 顶部用户信息区域 -->
  <view class="user-header">
    <!-- 未登录状态 -->
    <block wx:if="{{!isLoggedIn}}">
      <view class="login-prompt">
        <image class="default-avatar" src="/assets/icons/default-avatar.png" mode="aspectFill"></image>
        <view class="login-text">登录后体验更多功能</view>
        <button class="login-btn" bindtap="goToLogin">立即登录</button>
      </view>
    </block>
    
    <!-- 已登录状态 -->
    <block wx:else>
      <view class="user-info">
        <view class="avatar-container">
          <image class="avatar" 
            src="{{userInfo.avatar_url || userInfo.avatarUrl || '/assets/icons/default-avatar.png'}}" 
            mode="aspectFill" binderror="onAvatarError"></image>
        </view>
        <view class="info-container">
          <view class="username">{{userInfo.nickname || userInfo.nickName || '校园用户'}}</view>
          <view class="user-status">{{userInfo.status || '这个人很懒，什么都没留下'}}</view>
          <view class="edit-btn" bindtap="editProfile">编辑资料</view>
        </view>
      </view>
      
      <!-- 用户统计数据 -->
      <view class="stats-container">
        <view class="stat-item" bindtap="viewUserPosts">
          <view class="stat-number">{{postsCount}}</view>
          <view class="stat-label">发帖</view>
        </view>
        <view class="stat-item">
          <view class="stat-number">{{totalLikes}}</view>
          <view class="stat-label">获赞</view>
        </view>
        <view class="stat-item" bindtap="viewFollowed">
          <view class="stat-number">{{followedCount}}</view>
          <view class="stat-label">关注</view>
        </view>
        <view class="stat-item" bindtap="viewFollowers">
          <view class="stat-number">{{followerCount}}</view>
          <view class="stat-label">粉丝</view>
        </view>
      </view>
    </block>
  </view>
  
  <!-- 功能列表区域 -->
  <view class="function-list">
    <view class="function-group">
      <view class="function-title">内容管理</view>
      <view class="function-item" bindtap="viewCollections">
        <image class="function-icon" src="/assets/icons/star.png"></image>
        <text class="function-name">我的收藏</text>
        <image class="arrow-icon" src="/assets/icons/arrow-right.png"></image>
      </view>
      <view class="function-item" bindtap="viewHistory">
        <image class="function-icon" src="/assets/icons/history.png"></image>
        <text class="function-name">浏览历史</text>
        <image class="arrow-icon" src="/assets/icons/arrow-right.png"></image>
      </view>
      <view class="function-item" bindtap="viewComments">
        <image class="function-icon" src="/assets/icons/comment.png"></image>
        <text class="function-name">我的评论</text>
        <image class="arrow-icon" src="/assets/icons/arrow-right.png"></image>
      </view>
      <view class="function-item" bindtap="viewDrafts">
        <image class="function-icon" src="/assets/icons/draft.png"></image>
        <text class="function-name">草稿箱</text>
        <image class="arrow-icon" src="/assets/icons/arrow-right.png"></image>
      </view>
    </view>
    
    <view class="function-group">
      <view class="function-title">设置</view>
      <view class="function-item" bindtap="clearCache">
        <image class="function-icon" src="/assets/icons/clear.png"></image>
        <text class="function-name">清除缓存</text>
        <image class="arrow-icon" src="/assets/icons/arrow-right.png"></image>
      </view>
      <view class="function-item" bindtap="goToSettings">
        <image class="function-icon" src="/assets/icons/settings.png"></image>
        <text class="function-name">系统设置</text>
        <image class="arrow-icon" src="/assets/icons/arrow-right.png"></image>
      </view>
      <view class="function-item" bindtap="logout" wx:if="{{isLoggedIn}}">
        <image class="function-icon" src="/assets/icons/logout.png"></image>
        <text class="function-name">退出登录</text>
        <image class="arrow-icon" src="/assets/icons/arrow-right.png"></image>
      </view>
    </view>
  </view>
</view>